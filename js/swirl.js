"use strict";var container,canvas,ctx,center,gradient,tick,simplex,particleProps,positions,velocities,lifeSpans,speeds,sizes,hues,particleCount=1700,particlePropCount=9,particlePropsLength=particleCount*particlePropCount,rangeY=200,baseTTL=50,rangeTTL=150,baseSpeed=.1,rangeSpeed=2,baseRadius=1,rangeRadius=4,baseHue=720,rangeHue=200,noiseSteps=8,xOff=.00125,yOff=.00125,zOff=5e-4,backgroundColor="hsla(260,40%,5%,1)";function setup(){createCanvas(),resize(),initParticles(),draw()}function initParticles(){var e;for(tick=0,simplex=new SimplexNoise,particleProps=new Float32Array(particlePropsLength),e=0;e<particlePropsLength;e+=particlePropCount)initParticle(e)}function initParticle(e){var a=rand(canvas.a.width),t=center[1]+randRange(rangeY),r=baseTTL+rand(rangeTTL),n=baseSpeed+rand(rangeSpeed),c=baseRadius+rand(rangeRadius),i=baseHue+rand(rangeHue);particleProps.set([a,t,0,0,0,r,n,c,i],e)}function drawParticles(){for(var e=0;e<particlePropsLength;e+=particlePropCount)updateParticle(e)}function updateParticle(e){var a=1+e,t=2+e,r=3+e,n=4+e,c=5+e,i=6+e,s=7+e,o=8+e,l=particleProps[e],p=particleProps[a],d=simplex.noise3D(l*xOff,p*yOff,tick*zOff)*noiseSteps*TAU,u=lerp(particleProps[t],cos(d),.5),b=lerp(particleProps[r],sin(d),.5),h=particleProps[n],d=particleProps[c];drawParticle(l,p,i=l+u*(c=particleProps[i]),c=p+b*c,h,d,particleProps[s],particleProps[o]),h++,particleProps[e]=i,particleProps[a]=c,particleProps[t]=u,particleProps[r]=b,particleProps[n]=h,(checkBounds(l,p)||d<h)&&initParticle(e)}function drawParticle(e,a,t,r,n,c,i,s){ctx.a.save(),ctx.a.lineCap="round",ctx.a.lineWidth=i,ctx.a.strokeStyle="hsla(".concat(s,",100%,60%,").concat(fadeInOut(n,c),")"),ctx.a.beginPath(),ctx.a.moveTo(e,a),ctx.a.lineTo(t,r),ctx.a.stroke(),ctx.a.closePath(),ctx.a.restore()}function checkBounds(e,a){return e>canvas.a.width||e<0||a>canvas.a.height||a<0}function createCanvas(){container=document.querySelector(".content--canvas"),(canvas={a:document.createElement("canvas"),b:document.createElement("canvas")}).b.style="\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t",container.appendChild(canvas.b),ctx={a:canvas.a.getContext("2d"),b:canvas.b.getContext("2d")},center=[]}function resize(){var e=window,a=e.innerWidth,e=e.innerHeight;canvas.a.width=a,canvas.a.height=e,ctx.a.drawImage(canvas.b,0,0),canvas.b.width=a,canvas.b.height=e,ctx.b.drawImage(canvas.a,0,0),center[0]=.5*canvas.a.width,center[1]=.5*canvas.a.height}function renderGlow(){ctx.b.save(),ctx.b.filter="blur(8px) brightness(200%)",ctx.b.globalCompositeOperation="lighter",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore(),ctx.b.save(),ctx.b.filter="blur(4px) brightness(200%)",ctx.b.globalCompositeOperation="lighter",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore()}function renderToScreen(){ctx.b.save(),ctx.b.globalCompositeOperation="lighter",ctx.b.drawImage(canvas.a,0,0),ctx.b.restore()}function draw(){tick++,ctx.a.clearRect(0,0,canvas.a.width,canvas.a.height),ctx.b.fillStyle=backgroundColor,ctx.b.fillRect(0,0,canvas.a.width,canvas.a.height),drawParticles(),renderGlow(),renderToScreen(),window.requestAnimationFrame(draw)}1e3<window.innerWidth&&(window.addEventListener("load",setup),window.addEventListener("resize",resize));